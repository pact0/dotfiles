set -g mouse on

bind r source-file ~/.tmux.conf
set -g base-index 1

set-window-option -g mode-keys vi
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'xclip -in -selection clipboard'


######################################################################
# START OF PLUGINS
######################################################################

# Plugin manager for tmux 
set -g @plugin 'tmux-plugins/tpm'

# Simple tmux options for anyone
set -g @plugin 'tmux-plugins/tmux-sensible'

# Gruvbox theme for tmux - powerline support!
# set -g @plugin 'egel/tmux-gruvbox'

# Persistent tmux envs across system restarts
set -g @plugin 'tmux-plugins/tmux-resurrect'

# Continuous saving of tmux environment
set -g @plugin 'tmux-plugins/tmux-continuum'

#######################################################
# TMUX-CONTINUUM 
#######################################################

# Enables restoral of saved tmux config
set -g @continuum-restore 'on'

# How often to save a tmux layout
set -g @continuum-save-interval '10'

#######################################################
# TMUX-RESURRECT
#######################################################

# Capture contents of each pane 
set -g @resurrect-capture-pane-contents 'on'

# Set to resurrect neovim sessions 
set -g @resurrect-strategy-nvim 'session'

# Processes to resurrect 
set -g @resurrect-processes '~julia'

#######################################################
# TMUX-SENSIBLE
#######################################################

# Increase scrollback buffer size
set -g history-limit 5000

######################################################################
# END OF PLUGINS
######################################################################




######################################################################
# START OF GENERAL CONFIGURATIONS
######################################################################

# Turn on interactivity with mouse 
set -g mouse on

# Enables italics in tmux
set -g default-terminal "tmux-256color"

# Change the position of the status bar
# set-option -g status-position bottom

# Start window numbering at specific num
set -g base-index 1          

# Renumber windows on window close
set -g renumber-windows on    

# don't rename windows automatically
set-option -g allow-rename off

#######################################################
# KEY BINDING
#######################################################

# hjkl pane traversal
# vim-like pane switching
bind -r ^ last-window
bind -r k select-pane -U
bind -r j select-pane -D
bind -r h select-pane -L
bind -r l select-pane -R

# Remap prefix from 'C-b' to 'C-a'
unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix

# Bind popup display commands 
bind t popup -KER "topydo columns"
bind D popup -h80% -w80% -KR "gcalcli --calendar \"JZ Calendar\" calw"
bind s popup -h80% -w80% -KER "spt"
bind T popup -KR "$SHELL"

######################################################################
# END OF GENERAL CONFIGURATIONS
######################################################################



#####################################################################
# THEME
#####################################################################

# This tmux statusbar config was created based on gruvbox colorscheme

# status bar
set -g status "on"
set -g status-attr "none"
set -g status-justify "left"
set -g status-bg "colour237"

# status left
set -g status-left-attr "none"
set -g status-left-length "100"
set -g status-left "#[fg=colour237,bg=colour7,bold] #S #[fg=colour7,bg=colour237,nobold,nounderscore,noitalics]"

# status right
set -g status-right-attr "none"
set -g status-right-length "100"
set -g status-right "#[fg=colour12]#{?client_prefix,#[reverse]Command#[noreverse] ,} #[fg=colour238,bg=colour237,nobold,nounderscore,noitalics]#[fg=colour7,bg=colour238] %Y-%m-%d  %H:%M #[fg=colour7,bg=colour238,nobold,nounderscore,noitalics]#[fg=colour237,bg=colour7] #h " 

# window
setw -g window-status-attr "none"
setw -g window-status-separator ""
setw -g window-status-format "#[fg=colour7,bg=colour237] #I #[fg=colour7,bg=colour237] #W "

# active window
setw -g window-status-activity-attr "none"
setw -g window-status-current-format "#[fg=colour237,bg=colour3,nobold,nounderscore,noitalics]#[fg=colour237,bg=colour3] #I #[fg=colour237,bg=colour3] #W #[fg=colour3,bg=colour237,nobold,nounderscore,noitalics]"

# panes
set -g pane-active-border-fg "colour248"
set -g pane-border-fg "colour238"

# command bar
set -g message-command-fg "colour237"
set -g message-command-bg "colour248"
set -g message-fg "colour237"
set -g message-bg "colour248"


# Initialize tpm plugin manager - DO NOT MOVE
run '~/.tmux/plugins/tpm/tpm'
